!async function(){for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(e=>setTimeout(e,10));var o,r,d,c,u,g,e,t,i,a,n,l,s,f;o=Object.create,r=Object.defineProperty,d=Object.getOwnPropertyDescriptor,c=Object.getOwnPropertyNames,u=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty,i=(e=(e,t)=>function(){return t||(0,e[c(e)[0]])((t={exports:{}}).exports,t),t.exports})({"external-global-plugin:react-dom"(e,t){t.exports=Spicetify.ReactDOM}}),a=(t=(e,t,i)=>{i=null!=e?o(u(e)):{};var n=!t&&e&&e.__esModule?i:r(i,"default",{value:e,enumerable:!0}),s=e,l=void 0,a=void 0;if(s&&"object"==typeof s||"function"==typeof s)for(let e of c(s))g.call(n,e)||e===l||r(n,e,{get:()=>s[e],enumerable:!(a=d(s,e))||a.enumerable});return n})(e({"external-global-plugin:react"(e,t){t.exports=Spicetify.React}})()),n=t(i()),(s=l=class{static get ToggleSettings(){return l.SettingsSection.getFieldValue(l.ToggleSettingsId)}static set ToggleSettings(e){l.SettingsSection.setFieldValue(l.ToggleSettingsId,e)}constructor(e,t,i,n=void 0){this._id=e;let s="";switch(i){case"high":s=l.icons.high;break;case"medium":s=l.icons.medium;break;case"low":s=l.icons.low;break;case"mute":s=l.icons.mute;break;case"speakerOnly":s=l.icons.speakerOnly}e=`
      <svg role="presentation" style="fill: currentColor" viewBox="0 0 16 16" height="16" width="16">
          ${s}
      </svg>
    `;this.button=new Spicetify.Playbar.Button(`Volume Profile (${this._id})`,e,e=>{Spicetify.Player.setVolume(this.volume/100)},!1,!1,!0),this.button.element.addEventListener("contextmenu",e=>{l.ToggleSettings&&(this.volume=100*Spicetify.Player.getVolume(),Spicetify.showNotification(`Volume of "${this._id}" changed to `+this.toString()),l.SettingsSection.setFieldValue(this.settingId,this.volume.toString()),l.SettingsSection.rerender())}),Number.isNaN(this.volume)&&(this.volume=t),n&&(this.bind=n)}get localStorageId(){return l.localStorageIdPrefix+this._id}get settingId(){return l.settingIdPrefix+this._id}get volume(){var e=l.SettingsSection.getFieldValue(this.settingId);return Number(e)}set volume(e){l.SettingsSection.setFieldValue(this.settingId,e.toFixed(2))}get bind(){return l.SettingsSection.getFieldValue(l.bindIdPrefix+this._id)||""}set bind(e){l.SettingsSection.setFieldValue(l.bindIdPrefix+this._id,e),this.registerBind(e),this._old_bind=e}static SettingsSectionRegister(){if(l.SettingsRegistered)throw"Settings already registered";l.SettingsSection.pushSettings().then(()=>{l.SettingsRegistered=!0})}static isValidVolume(e){return!(""===e||Number.isNaN(Number(e))||Number(e)<0||100<Number(e))}registerSetting(){l.SettingsSection.addInput(this.settingId,`Volume of Profile "${this._id}"`,this.toString(),()=>{var e=l.SettingsSection.getFieldValue(this.settingId);l.isValidVolume(e)&&l.SettingsSection.setFieldValue(this.settingId,e)}),l.SettingsSection.addInput(l.bindIdPrefix+this._id,`Bind for Profile "${this._id}"`,this.bind,()=>{this.bind=l.SettingsSection.getFieldValue(l.bindIdPrefix+this._id)})}toString(){return this.volume.toFixed(2)}click(){this.button.element.click()}registerBind(e){Spicetify.Mousetrap.unbind(e),Spicetify.Mousetrap.bind(e,()=>(this.click(),!0))}}).icons={get low(){return'<path d="M9.741.85a.75.75 0 01.375.65v13a.75.75 0 01-1.125.65l-6.925-4a3.642 3.642 0 01-1.33-4.967 3.639 3.639 0 011.33-1.332l6.925-4a.75.75 0 01.75 0zm-6.924 5.3a2.139 2.139 0 000 3.7l5.8 3.35V2.8l-5.8 3.35zm8.683 4.29V5.56a2.75 2.75 0 010 4.88z"></path>'},get speakerOnly(){return'<path d="M13.86 5.47a.75.75 0 00-1.061 0l-1.47 1.47-1.47-1.47A.75.75 0 008.8 6.53L10.269 8l-1.47 1.47a.75.75 0 101.06 1.06l1.47-1.47 1.47 1.47a.75.75 0 001.06-1.06L12.39 8l1.47-1.47a.75.75 0 000-1.06z"></path>'},get high(){return l.icons.low+'<path d="M11.5 13.614a5.752 5.752 0 000-11.228v1.55a4.252 4.252 0 010 8.127v1.55z"></path>'},get medium(){return'<path d="M9.741.85a.75.75 0 01.375.65v13a.75.75 0 01-1.125.65l-6.925-4a3.642 3.642 0 01-1.33-4.967 3.639 3.639 0 011.33-1.332l6.925-4a.75.75 0 01.75 0zm-6.924 5.3a2.139 2.139 0 000 3.7l5.8 3.35V2.8l-5.8 3.35zm8.683 6.087a4.502 4.502 0 000-8.474v1.65a2.999 2.999 0 010 5.175v1.649z"></path>'},get mute(){return l.icons.speakerOnly+'<path d="M10.116 1.5A.75.75 0 008.991.85l-6.925 4a3.642 3.642 0 00-1.33 4.967 3.639 3.639 0 001.33 1.332l6.925 4a.75.75 0 001.125-.649v-1.906a4.73 4.73 0 01-1.5-.694v1.3L2.817 9.852a2.141 2.141 0 01-.781-2.92c.187-.324.456-.594.78-.782l5.8-3.35v1.3c.45-.313.956-.55 1.5-.694V1.5z"></path>'}},s.SettingsRegistered=!1,s.ToggleSettingsId="volume-profile-toggle-on-left-click",s.settingIdPrefix="settings-volume-profile-",s.bindIdPrefix="bind-volume-profile-",s.SettingsSection=new class{constructor(e,t,i={}){this.name=e,this.settingsId=t,this.initialSettingsFields=i,this.settingsFields=this.initialSettingsFields,this.setRerender=null,this.pushSettings=async()=>{for(Object.entries(this.settingsFields).forEach(([e,t])=>{"button"!==t.type&&void 0===this.getFieldValue(e)&&this.setFieldValue(e,t.defaultValue)});!Spicetify?.Platform?.History?.listen;)await new Promise(e=>setTimeout(e,100));this.stopHistoryListener&&this.stopHistoryListener(),this.stopHistoryListener=Spicetify.Platform.History.listen(e=>{"/preferences"===e.pathname&&this.render()}),"/preferences"===Spicetify.Platform.History.location.pathname&&await this.render()},this.rerender=()=>{this.setRerender&&this.setRerender(Math.random())},this.render=async()=>{for(;!document.getElementById("desktop.settings.selectLanguage");){if("/preferences"!==Spicetify.Platform.History.location.pathname)return;await new Promise(e=>setTimeout(e,100))}var e=document.querySelector(".main-view-container__scroll-node-child main div");if(!e)return console.error("[spcr-settings] settings container not found");let t=Array.from(e.children).find(e=>e.id===this.settingsId);t?console.log(t):((t=document.createElement("div")).id=this.settingsId,e.appendChild(t)),n.default.render(a.default.createElement(this.FieldsContainer,null),t)},this.addButton=(e,t,i,n,s)=>{this.settingsFields[e]={type:"button",description:t,value:i,events:{onClick:n,...s}}},this.addInput=(e,t,i,n,s,l)=>{this.settingsFields[e]={type:"input",description:t,defaultValue:i,inputType:s,events:{onChange:n,...l}}},this.addHidden=(e,t)=>{this.settingsFields[e]={type:"hidden",defaultValue:t}},this.addToggle=(e,t,i,n,s)=>{this.settingsFields[e]={type:"toggle",description:t,defaultValue:i,events:{onChange:n,...s}}},this.addDropDown=(e,t,i,n,s,l)=>{this.settingsFields[e]={type:"dropdown",description:t,defaultValue:i[n],options:i,events:{onSelect:s,...l}}},this.getFieldValue=e=>JSON.parse(Spicetify.LocalStorage.get(this.settingsId+"."+e)||"{}")?.value,this.setFieldValue=(e,t)=>{Spicetify.LocalStorage.set(this.settingsId+"."+e,JSON.stringify({value:t}))},this.FieldsContainer=()=>{var[e,t]=(0,a.useState)(0);return this.setRerender=t,a.default.createElement("div",{className:"x-settings-section",key:e},a.default.createElement("h2",{className:"TypeElement-cello-textBase-type"},this.name),Object.entries(this.settingsFields).map(([e,t])=>a.default.createElement(this.Field,{nameId:e,field:t})))},this.Field=i=>{var e=this.settingsId+"."+i.nameId;let t;if(t="button"===i.field.type?i.field.value:this.getFieldValue(i.nameId),"hidden"===i.field.type)return a.default.createElement(a.default.Fragment,null);const[n,s]=(0,a.useState)(t),l=e=>{void 0!==e&&(s(e),this.setFieldValue(i.nameId,e))};return a.default.createElement("div",{className:"x-settings-row"},a.default.createElement("div",{className:"x-settings-firstColumn"},a.default.createElement("label",{className:"TypeElement-viola-textSubdued-type",htmlFor:e},i.field.description||"")),a.default.createElement("div",{className:"x-settings-secondColumn"},"input"===i.field.type?a.default.createElement("input",{className:"x-settings-input",id:e,dir:"ltr",value:n,type:i.field.inputType||"text",...i.field.events,onChange:e=>{l(e.currentTarget.value);var t=i.field.events?.onChange;t&&t(e)}}):"button"===i.field.type?a.default.createElement("span",null,a.default.createElement("button",{id:e,className:"Button-sc-y0gtbx-0 Button-small-buttonSecondary-useBrowserDefaultFocusStyle x-settings-button",...i.field.events,onClick:e=>{l();var t=i.field.events?.onClick;t&&t(e)},type:"button"},n)):"toggle"===i.field.type?a.default.createElement("label",{className:"x-settings-secondColumn x-toggle-wrapper"},a.default.createElement("input",{id:e,className:"x-toggle-input",type:"checkbox",checked:n,...i.field.events,onClick:e=>{l(e.currentTarget.checked);var t=i.field.events?.onClick;t&&t(e)}}),a.default.createElement("span",{className:"x-toggle-indicatorWrapper"},a.default.createElement("span",{className:"x-toggle-indicator"}))):"dropdown"===i.field.type?a.default.createElement("select",{className:"main-dropDown-dropDown",id:e,...i.field.events,onChange:e=>{l(i.field.options[e.currentTarget.selectedIndex]);var t=i.field.events?.onChange;t&&t(e)}},i.field.options.map((e,t)=>a.default.createElement("option",{selected:e===n,value:t+1},e))):a.default.createElement(a.default.Fragment,null)))}}}("Volume Profile Settings","volume-profile-settings"),s.localStorageIdPrefix="localStorage-volume-profile-",f=async function(){for(;null==Spicetify||!Spicetify.Player||null==Spicetify||!Spicetify.LocalStorage||null==Spicetify||!Spicetify.Mousetrap;)await new Promise(e=>setTimeout(e,100));s.SettingsSection.addToggle("toggle-left-click-volume-profile","Set Volume Profile on left click",s.ToggleSettings,()=>{s.ToggleSettings=s.SettingsSection.getFieldValue("toggle-left-click-volume-profile")});for(const e of[new s("left",30,"low","f13"),new s("middle",50,"medium","f14"),new s("right",80,"high","f15")])e.registerSetting();s.SettingsSectionRegister()},(async()=>{await f()})()}();